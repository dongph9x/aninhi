# ğŸ® Há»‡ Thá»‘ng UI Äáº¥u CÃ¡ (Battle Fish UI)

## ğŸ“‹ Tá»•ng Quan

Há»‡ thá»‘ng UI Ä‘áº¥u cÃ¡ cung cáº¥p giao diá»‡n trá»±c quan vÃ  dá»… sá»­ dá»¥ng Ä‘á»ƒ quáº£n lÃ½ cÃ¡ Ä‘áº¥u, thay tháº¿ cho cÃ¡c lá»‡nh text truyá»n thá»‘ng. NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c nÃºt vÃ  dropdown Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c thao tÃ¡c má»™t cÃ¡ch thuáº­n tiá»‡n.

## ğŸ¯ TÃ­nh NÄƒng ChÃ­nh

### 1. **Dropdown Chá»n CÃ¡**
- **CÃ¡ trong tÃºi Ä‘áº¥u**: Hiá»ƒn thá»‹ vá»›i emoji ğŸŸ
- **CÃ¡ cÃ³ thá»ƒ thÃªm**: Hiá»ƒn thá»‹ vá»›i emoji â•
- **CÃ¡ Ä‘Ã£ chá»n**: Hiá»ƒn thá»‹ vá»›i emoji ğŸ¯
- **ThÃ´ng tin chi tiáº¿t**: Level, tháº¿ há»‡, sá»©c máº¡nh, giÃ¡ trá»‹

### 2. **CÃ¡c NÃºt Thao TÃ¡c**
- **â• ThÃªm CÃ¡**: ThÃªm cÃ¡ Ä‘Æ°á»£c chá»n vÃ o tÃºi Ä‘áº¥u
- **ğŸ—‘ï¸ XÃ³a CÃ¡**: XÃ³a cÃ¡ khá»i tÃºi Ä‘áº¥u
- **âš”ï¸ TÃ¬m Äá»‘i Thá»§**: TÃ¬m Ä‘á»‘i thá»§ ngáº«u nhiÃªn Ä‘á»ƒ Ä‘áº¥u
- **ğŸ“Š Thá»‘ng KÃª**: Xem thá»‘ng kÃª Ä‘áº¥u cÃ¡ cÃ¡ nhÃ¢n

### 3. **CÃ¡c NÃºt Phá»¥**
- **ğŸ“œ Lá»‹ch Sá»­**: Xem lá»‹ch sá»­ Ä‘áº¥u gáº§n Ä‘Ã¢y
- **ğŸ† Báº£ng Xáº¿p Háº¡ng**: Xem top ngÆ°á»i chÆ¡i Ä‘áº¥u cÃ¡
- **ğŸ”„ LÃ m Má»›i**: Cáº­p nháº­t dá»¯ liá»‡u má»›i nháº¥t
- **â“ HÆ°á»›ng Dáº«n**: Xem hÆ°á»›ng dáº«n sá»­ dá»¥ng

## ğŸš€ CÃ¡ch Sá»­ Dá»¥ng

### Má»Ÿ Giao Diá»‡n:
```bash
n.fishbattle ui
```

### Quy TrÃ¬nh Sá»­ Dá»¥ng:
1. **Chá»n cÃ¡** tá»« dropdown menu
2. **ThÃªm cÃ¡** vÃ o tÃºi Ä‘áº¥u (náº¿u lÃ  cÃ¡ cÃ³ thá»ƒ thÃªm)
3. **TÃ¬m Ä‘á»‘i thá»§** Ä‘á»ƒ Ä‘áº¥u (náº¿u cÃ³ cÃ¡ trong tÃºi Ä‘áº¥u)
4. **Xem thá»‘ng kÃª** vÃ  lá»‹ch sá»­ Ä‘áº¥u

## ğŸ¨ Giao Diá»‡n UI

### Embed Message:
```
âš”ï¸ Há»‡ Thá»‘ng Äáº¥u CÃ¡
Quáº£n lÃ½ cÃ¡ Ä‘áº¥u vÃ  tÃ¬m Ä‘á»‘i thá»§!

ğŸ“¦ TÃºi Äáº¥u CÃ¡
2/5 cÃ¡ trong tÃºi Ä‘áº¥u

ğŸŸ CÃ¡ Trong TÃºi Äáº¥u
ğŸ¯ 1. Gen 2 Battle Fish (Lv.10, Gen.2)
ğŸ’ª Power: 350 | ğŸ’° 2,000 coins
ğŸ“Š Stats: ğŸ’ª70 ğŸƒ60 ğŸ§ 65 ğŸ›¡ï¸55 ğŸ€60

2. Gen 3 Elite Fish (Lv.10, Gen.3)
ğŸ’ª Power: 380 | ğŸ’° 3,000 coins
ğŸ“Š Stats: ğŸ’ª80 ğŸƒ75 ğŸ§ 70 ğŸ›¡ï¸65 ğŸ€70

ğŸ“‹ CÃ¡ CÃ³ Thá»ƒ ThÃªm VÃ o TÃºi Äáº¥u
âŒ KhÃ´ng cÃ³ cÃ¡ nÃ o Ä‘á»§ Ä‘iá»u kiá»‡n!

ğŸ¯ CÃ¡ch Sá»­ Dá»¥ng
1. Chá»n cÃ¡ tá»« dropdown bÃªn dÆ°á»›i
2. ThÃªm cÃ¡ vÃ o tÃºi Ä‘áº¥u
3. TÃ¬m Ä‘á»‘i thá»§ Ä‘á»ƒ Ä‘áº¥u
4. XÃ³a cÃ¡ khá»i tÃºi Ä‘áº¥u náº¿u cáº§n
```

### Components:
- **Row 1**: Dropdown chá»n cÃ¡
- **Row 2**: NÃºt thao tÃ¡c chÃ­nh (ThÃªm, Äáº¥u, XÃ³a, Thá»‘ng kÃª)
- **Row 3**: NÃºt phá»¥ (Lá»‹ch sá»­, Báº£ng xáº¿p háº¡ng, LÃ m má»›i, HÆ°á»›ng dáº«n)

## ğŸ”§ Kiáº¿n TrÃºc Ká»¹ Thuáº­t

### Classes:
```typescript
// UI Component
BattleFishUI {
  - createEmbed(): EmbedBuilder
  - createComponents(): ActionRowBuilder[]
  - updateSelectedFish(fishId: string): void
  - getSelectedFishId(): string | undefined
  - canAddSelectedFish(): boolean
  - canRemoveSelectedFish(): boolean
  - getActualFishId(): string | undefined
  - calculatePower(fish: any): number
}

// Interaction Handler
BattleFishHandler {
  - handleInteraction(interaction): void
  - handleSelectMenu(interaction, messageData): void
  - handleButton(interaction, messageData): void
  - handleAddFish(interaction, messageData): void
  - handleRemoveFish(interaction, messageData): void
  - handleFindOpponent(interaction, messageData): void
  - handleShowStats(interaction, messageData): void
  - handleShowHistory(interaction, messageData): void
  - handleShowLeaderboard(interaction, messageData): void
  - handleRefresh(interaction, messageData): void
  - handleShowHelp(interaction, messageData): void
}
```

### Custom IDs:
- `battle_fish_select`: Dropdown chá»n cÃ¡
- `battle_fish_add`: NÃºt thÃªm cÃ¡
- `battle_fish_remove`: NÃºt xÃ³a cÃ¡
- `battle_fish_fight`: NÃºt tÃ¬m Ä‘á»‘i thá»§
- `battle_fish_stats`: NÃºt thá»‘ng kÃª
- `battle_fish_history`: NÃºt lá»‹ch sá»­
- `battle_fish_leaderboard`: NÃºt báº£ng xáº¿p háº¡ng
- `battle_fish_refresh`: NÃºt lÃ m má»›i
- `battle_fish_help`: NÃºt hÆ°á»›ng dáº«n

## ğŸ“Š TÃ­nh NÄƒng Chi Tiáº¿t

### 1. **Dropdown Selection**
```typescript
// CÃ¡ trong tÃºi Ä‘áº¥u
{
  label: "Gen 2 Battle Fish (Lv.10, Gen.2)",
  description: "Power: 350 | ğŸ’°2,000 | Trong tÃºi Ä‘áº¥u",
  value: "battle_fish_id",
  emoji: "ğŸŸ"
}

// CÃ¡ cÃ³ thá»ƒ thÃªm
{
  label: "Gen 3 Elite Fish (Lv.10, Gen.3)",
  description: "Power: 380 | ğŸ’°3,000 | CÃ³ thá»ƒ thÃªm",
  value: "eligible_fish_id",
  emoji: "â•"
}
```

### 2. **Button States**
- **Enabled**: CÃ³ thá»ƒ thá»±c hiá»‡n hÃ nh Ä‘á»™ng
- **Disabled**: KhÃ´ng thá»ƒ thá»±c hiá»‡n hÃ nh Ä‘á»™ng
- **Dynamic**: Thay Ä‘á»•i theo tráº¡ng thÃ¡i hiá»‡n táº¡i

### 3. **Power Calculation**
```typescript
calculatePower(fish: any): number {
  const stats = fish.stats || {};
  const basePower = (stats.strength || 0) + 
                   (stats.agility || 0) + 
                   (stats.intelligence || 0) + 
                   (stats.defense || 0) + 
                   (stats.luck || 0);
  return Math.floor(basePower * (1 + fish.level * 0.1));
}
```

## ğŸ® TÆ°Æ¡ng TÃ¡c NgÆ°á»i DÃ¹ng

### 1. **Chá»n CÃ¡**
- Click dropdown â†’ Chá»n cÃ¡ â†’ UI cáº­p nháº­t
- CÃ¡ Ä‘Æ°á»£c chá»n hiá»ƒn thá»‹ ğŸ¯
- NÃºt thao tÃ¡c Ä‘Æ°á»£c enable/disable tÆ°Æ¡ng á»©ng

### 2. **ThÃªm CÃ¡**
- Chá»n cÃ¡ cÃ³ thá»ƒ thÃªm (â•)
- Click "ThÃªm CÃ¡" â†’ CÃ¡ Ä‘Æ°á»£c thÃªm vÃ o tÃºi Ä‘áº¥u
- UI tá»± Ä‘á»™ng cáº­p nháº­t

### 3. **XÃ³a CÃ¡**
- Chá»n cÃ¡ trong tÃºi Ä‘áº¥u (ğŸŸ)
- Click "XÃ³a CÃ¡" â†’ CÃ¡ Ä‘Æ°á»£c xÃ³a khá»i tÃºi Ä‘áº¥u
- UI tá»± Ä‘á»™ng cáº­p nháº­t

### 4. **TÃ¬m Äá»‘i Thá»§**
- Click "TÃ¬m Äá»‘i Thá»§" â†’ Hiá»ƒn thá»‹ thÃ´ng tin Ä‘á»‘i thá»§
- NÃºt "Báº¯t Äáº§u Äáº¥u" Ä‘á»ƒ xÃ¡c nháº­n Ä‘áº¥u

## ğŸ”„ State Management

### Message Data Cache:
```typescript
{
  userId: string;
  guildId: string;
  inventory: BattleFishInventory;
  eligibleFish: Fish[];
  selectedFishId?: string;
}
```

### UI Updates:
- **Automatic**: Sau má»—i thao tÃ¡c thÃ nh cÃ´ng
- **Manual**: Khi click "LÃ m Má»›i"
- **Real-time**: Khi chá»n cÃ¡ tá»« dropdown

## ğŸ¨ UI/UX Features

### Visual Design:
- **Color Coding**: Xanh (thÃ nh cÃ´ng), Ä‘á» (lá»—i), vÃ ng (thÃ´ng bÃ¡o)
- **Emoji Icons**: Trá»±c quan vÃ  dá»… hiá»ƒu
- **Consistent Layout**: Cáº¥u trÃºc rÃµ rÃ ng vÃ  nháº¥t quÃ¡n

### User Experience:
- **Intuitive**: Dá»… sá»­ dá»¥ng, khÃ´ng cáº§n Ä‘á»c hÆ°á»›ng dáº«n
- **Responsive**: Pháº£n há»“i nhanh vá»›i má»i thao tÃ¡c
- **Informative**: Hiá»ƒn thá»‹ Ä‘áº§y Ä‘á»§ thÃ´ng tin cáº§n thiáº¿t
- **Error Handling**: ThÃ´ng bÃ¡o lá»—i rÃµ rÃ ng vÃ  hÆ°á»›ng dáº«n kháº¯c phá»¥c

### Accessibility:
- **Clear Labels**: NhÃ£n rÃµ rÃ ng cho má»i nÃºt
- **Descriptive Text**: MÃ´ táº£ chi tiáº¿t cho má»—i tÃ¹y chá»n
- **Visual Feedback**: Pháº£n há»“i trá»±c quan cho má»i hÃ nh Ä‘á»™ng

## ğŸ§ª Testing

### Test Script:
```bash
yarn tsx scripts/test-battle-fish-ui.ts
```

### Test Cases:
1. **UI Creation**: Táº¡o UI vá»›i dá»¯ liá»‡u khÃ¡c nhau
2. **Fish Selection**: Chá»n cÃ¡ tá»« dropdown
3. **Button States**: Kiá»ƒm tra tráº¡ng thÃ¡i nÃºt
4. **Power Calculation**: TÃ­nh toÃ¡n sá»©c máº¡nh
5. **Data Updates**: Cáº­p nháº­t dá»¯ liá»‡u sau thao tÃ¡c

## ğŸš€ Performance

### Optimization:
- **Lazy Loading**: Chá»‰ load dá»¯ liá»‡u khi cáº§n
- **Caching**: Cache message data Ä‘á»ƒ trÃ¡nh query láº¡i
- **Efficient Updates**: Chá»‰ cáº­p nháº­t pháº§n cáº§n thiáº¿t

### Scalability:
- **Memory Management**: Tá»± Ä‘á»™ng cleanup message cache
- **Database Queries**: Tá»‘i Æ°u hÃ³a queries vá»›i Prisma
- **Component Reuse**: TÃ¡i sá»­ dá»¥ng components khi cÃ³ thá»ƒ

## ğŸ”® TÃ­nh NÄƒng TÆ°Æ¡ng Lai

### CÃ³ Thá»ƒ PhÃ¡t Triá»ƒn:
- **Drag & Drop**: KÃ©o tháº£ cÃ¡ giá»¯a cÃ¡c tÃºi
- **Bulk Operations**: Thao tÃ¡c nhiá»u cÃ¡ cÃ¹ng lÃºc
- **Advanced Filtering**: Lá»c cÃ¡ theo nhiá»u tiÃªu chÃ­
- **Sorting Options**: Sáº¯p xáº¿p cÃ¡ theo stats
- **Custom Themes**: TÃ¹y chá»‰nh giao diá»‡n

### Improvements:
- **Real-time Updates**: Cáº­p nháº­t real-time khi cÃ³ thay Ä‘á»•i
- **Keyboard Shortcuts**: PhÃ­m táº¯t cho thao tÃ¡c nhanh
- **Mobile Optimization**: Tá»‘i Æ°u cho thiáº¿t bá»‹ di Ä‘á»™ng
- **Accessibility**: Cáº£i thiá»‡n kháº£ nÄƒng tiáº¿p cáº­n

---

**ğŸ‰ Há»‡ thá»‘ng UI Ä‘áº¥u cÃ¡ Ä‘Ã£ sáºµn sÃ ng! Cung cáº¥p tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng tuyá»‡t vá»i vá»›i giao diá»‡n trá»±c quan vÃ  dá»… sá»­ dá»¥ng!** 